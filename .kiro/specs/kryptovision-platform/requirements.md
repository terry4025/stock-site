# Requirements Document

## Introduction

KryptoVision은 Gemini 2.5 Pro AI를 활용한 실시간 금융 분석 플랫폼입니다. 이 플랫폼은 주식 및 암호화폐 시장 데이터를 실시간으로 시각화하고, AI 기반 뉴스 분석과 사용자 맞춤형 대시보드를 제공하는 Next.js + Supabase 기반 풀스택 웹 애플리케이션입니다.

## Requirements

### Requirement 1: 실시간 주식 데이터 표시

**User Story:** 투자자로서, 선택한 종목의 실시간 주가 정보를 확인하고 싶습니다. 그래야 시장 상황을 즉시 파악할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 종목 코드를 검색하면 THEN 시스템은 실시간 주가 데이터를 표시해야 합니다
2. WHEN 주가 데이터가 업데이트되면 THEN 시스템은 현재가, 일일 변동률, 거래량, 시가총액, P/E 비율, 52주 최고/최저가, 배당수익률, 베타값을 표시해야 합니다
3. WHEN 실시간 업데이트가 활성화되면 THEN 시스템은 설정된 간격(기본 30초)마다 데이터를 자동 갱신해야 합니다
4. WHEN API 호출이 실패하면 THEN 시스템은 폴백 데이터를 사용하여 서비스 중단을 방지해야 합니다

### Requirement 2: 인터랙티브 차트 분석

**User Story:** 투자자로서, 종목의 가격 움직임을 시각적으로 분석하고 싶습니다. 그래야 기술적 분석을 통해 투자 결정을 내릴 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 종목을 선택하면 THEN 시스템은 캔들스틱 차트를 표시해야 합니다
2. WHEN 차트가 로드되면 THEN 시스템은 거래량 차트와 이동평균선(20일, 50일)을 함께 표시해야 합니다
3. WHEN 사용자가 차트를 조작하면 THEN 시스템은 확대/축소 및 시간대 변경 기능을 제공해야 합니다
4. WHEN 차트 데이터가 부족하면 THEN 시스템은 적절한 오류 메시지를 표시해야 합니다

### Requirement 3: AI 기반 종목 분석

**User Story:** 투자자로서, AI가 분석한 종목의 투자 추천을 받고 싶습니다. 그래야 객관적인 분석을 바탕으로 투자 결정을 내릴 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 "AI 분석 시작" 버튼을 클릭하면 THEN 시스템은 Gemini 2.5 Pro를 사용하여 종합 분석을 수행해야 합니다
2. WHEN AI 분석이 완료되면 THEN 시스템은 매수/관망 추천과 신뢰도 점수를 제공해야 합니다
3. WHEN 매수 추천이 나오면 THEN 시스템은 단기/장기 목표가, 추천 매수가, 매도가, 위험도를 제공해야 합니다
4. WHEN 분석 중 오류가 발생하면 THEN 시스템은 폴백 분석 결과를 제공해야 합니다
5. WHEN 사용자가 로그인되어 있으면 THEN 시스템은 분석 결과를 사용자 히스토리에 저장해야 합니다

### Requirement 4: 뉴스 감정 분석

**User Story:** 투자자로서, 종목 관련 뉴스의 감정을 AI가 분석한 결과를 보고 싶습니다. 그래야 시장 심리를 파악할 수 있습니다.

#### Acceptance Criteria

1. WHEN 종목이 선택되면 THEN 시스템은 관련 뉴스를 수집하고 감정 분석을 수행해야 합니다
2. WHEN 뉴스 감정 분석이 완료되면 THEN 시스템은 긍정적/부정적/중립적 감정과 신뢰도를 표시해야 합니다
3. WHEN 뉴스 제목을 클릭하면 THEN 시스템은 AI 요약을 제공해야 합니다
4. WHEN 시장 뉴스가 업데이트되면 THEN 시스템은 자동으로 새로운 뉴스를 반영해야 합니다

### Requirement 5: Fear & Greed 지수 표시

**User Story:** 투자자로서, 시장의 전반적인 심리 상태를 파악하고 싶습니다. 그래야 시장 타이밍을 판단할 수 있습니다.

#### Acceptance Criteria

1. WHEN 대시보드가 로드되면 THEN 시스템은 실시간 Fear & Greed 지수를 표시해야 합니다
2. WHEN Fear & Greed 지수가 업데이트되면 THEN 시스템은 0-100 범위의 값과 해석을 제공해야 합니다
3. WHEN 주요 API가 실패하면 THEN 시스템은 다중 소스(CNN, Alternative API, VIX 기반)를 통해 데이터를 확보해야 합니다
4. WHEN 모든 소스가 실패하면 THEN 시스템은 시뮬레이션된 값을 제공해야 합니다

### Requirement 6: 글로벌 시장 지수 표시

**User Story:** 투자자로서, 주요 글로벌 시장 지수의 현재 상황을 한눈에 보고 싶습니다. 그래야 전체 시장 흐름을 파악할 수 있습니다.

#### Acceptance Criteria

1. WHEN 대시보드가 로드되면 THEN 시스템은 S&P 500, 나스닥, 다우존스, 코스피 등 주요 지수를 표시해야 합니다
2. WHEN 지수 데이터가 업데이트되면 THEN 시스템은 현재값, 변동값, 변동률을 표시해야 합니다
3. WHEN 지수가 상승하면 THEN 시스템은 녹색으로, 하락하면 빨간색으로 표시해야 합니다

### Requirement 7: 다국어 지원

**User Story:** 사용자로서, 한국어와 영어 중 선호하는 언어로 플랫폼을 사용하고 싶습니다. 그래야 더 편리하게 정보를 이해할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 언어 스위처를 클릭하면 THEN 시스템은 한국어와 영어 간 전환을 제공해야 합니다
2. WHEN 언어가 변경되면 THEN 시스템은 모든 UI 텍스트와 AI 분석 결과를 선택된 언어로 표시해야 합니다
3. WHEN 페이지가 처음 로드되면 THEN 시스템은 기본적으로 한국어를 사용해야 합니다
4. WHEN 사용자가 로그인되어 있으면 THEN 시스템은 언어 설정을 저장하고 다음 방문 시 적용해야 합니다

### Requirement 8: 사용자 인증 및 설정

**User Story:** 사용자로서, 개인 계정을 만들고 맞춤 설정을 저장하고 싶습니다. 그래야 개인화된 경험을 할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 로그인하면 THEN 시스템은 Supabase Auth를 통해 인증을 처리해야 합니다
2. WHEN 사용자가 설정을 변경하면 THEN 시스템은 언어, 테마, 새로고침 간격 등을 저장해야 합니다
3. WHEN 사용자가 AI 분석을 실행하면 THEN 시스템은 분석 히스토리를 저장해야 합니다
4. WHEN 사용자가 CSV 내보내기를 요청하면 THEN 시스템은 분석 데이터를 다운로드 가능한 형태로 제공해야 합니다

### Requirement 9: 실시간 상태 모니터링

**User Story:** 사용자로서, 데이터 업데이트 상태를 확인하고 제어하고 싶습니다. 그래야 시스템의 동작 상태를 파악할 수 있습니다.

#### Acceptance Criteria

1. WHEN 실시간 업데이트가 활성화되면 THEN 시스템은 업데이트 상태와 마지막 업데이트 시간을 표시해야 합니다
2. WHEN 사용자가 실시간 업데이트를 토글하면 THEN 시스템은 즉시 활성화/비활성화를 적용해야 합니다
3. WHEN 업데이트 간격이 변경되면 THEN 시스템은 새로운 간격을 적용해야 합니다
4. WHEN 연결 상태에 문제가 있으면 THEN 시스템은 사용자에게 알림을 제공해야 합니다

### Requirement 10: 월가 코멘트 및 시장 일정

**User Story:** 투자자로서, 월가 전문가들의 의견과 중요한 시장 일정을 확인하고 싶습니다. 그래야 시장 동향을 더 잘 이해할 수 있습니다.

#### Acceptance Criteria

1. WHEN 뉴스가 수집되면 THEN 시스템은 월가 관련 코멘트를 별도로 추출하여 표시해야 합니다
2. WHEN 시장 일정이 업데이트되면 THEN 시스템은 주요 경제 지표 발표일과 거래소 휴장일을 표시해야 합니다
3. WHEN 사이드바가 로드되면 THEN 시스템은 월가 코멘트와 시장 일정을 함께 표시해야 합니다
4. WHEN 새로운 월가 코멘트가 감지되면 THEN 시스템은 자동으로 업데이트해야 합니다